const onLoadGlobal=()=>{const e=document.querySelector(".game-screen"),t=document.querySelector(".portal"),r=document.querySelector("#btn-ini"),n=document.querySelector("#esq"),a=document.querySelector("#dir"),o=document.querySelector("#pause"),l=document.querySelectorAll(".panel i");let i,s,c,d,u,m=!1,v=!1,h=!1,p=0,f=0,g=0;class y{constructor(e,t){this.target=e,this.target.className="target animate",this.maxLeft=this.target.parentElement.offsetWidth-100,this.maxTop=this.target.parentElement.offsetHeight,this.randomLeftPos=Math.floor(Math.random()*(this.maxLeft-5)+5),this.target.style.left=this.randomLeftPos+"px",this.speed=t,this.explosion=this.target.parentElement.appendChild(document.createElement("div")),this.explosion.className="impact",this.explosion.style.left=this.randomLeftPos+10+"px"}_animateTarget(){this.target.animate([{top:this.target.offsetTop+"px"},{top:this.maxTop+"px"}],this.speed)}_missedTarget(){this.target.className="target burned",setTimeout((()=>{this.target.remove(),this.explosion.style.display="block"}),200),setTimeout((()=>this.explosion.remove()),400)}_getTargetPosition(){return this.target.getBoundingClientRect()}}const I=(e,t)=>{const r=document.querySelector("#avoided"),n=document.querySelector("#impacts");r.innerHTML=e,n.innerHTML=t};I(p,f);const L=()=>{let e=document.querySelector(".target");if(!e)return!1;e.remove(),g--},S=()=>{const e=document.querySelector(".paused");if(m)return!1;m=!0,clearInterval(i),clearInterval(s),clearInterval(d),L(),u=setInterval((()=>{e.style.display="block",setTimeout((()=>e.style.display="none"),500)}),1e3)},q=e=>{clearInterval(c),clearInterval(i),clearInterval(s),clearInterval(d),L();let t=Math.floor(p/e*100);((e,t,r)=>{let n;n=r<70?document.querySelector(".bad"):document.querySelector(".good");let a=n.querySelector(".final-pts"),o=n.querySelector(".final-imp"),l=n.querySelector(".perc");n.style.display="block",a.innerHTML=e,o.innerHTML=t,l.innerHTML=r+"%"})(p,f,t),h=!0},T=r=>{const n=e.appendChild(document.createElement("div"));target=new y(n,r),target._animateTarget(),d=setInterval((()=>(e=>{let r=e._getTargetPosition().bottom,n=e._getTargetPosition().left,a=e._getTargetPosition().right,o=t.getBoundingClientRect().top-7,l=t.getBoundingClientRect().left-20,i=t.getBoundingClientRect().right+20;return r>o+50?(e._missedTarget(),f++,clearInterval(d),void I(p,f)):r>=o&&r<=o+50&&n>=l&&a<=i?(p++,e.target.remove(),clearInterval(d),void I(p,f)):void 0})(target)),100)},E=e=>{if(0===navigator.maxTouchPoints)return!1;l.forEach((t=>t.style.display=e))},x=()=>{t.offsetLeft<=e.offsetWidth-t.offsetWidth-5?t.style.left=t.offsetLeft+5+"px":clearInterval(i)},b=()=>{t.offsetLeft>5?t.style.left=t.offsetLeft-5+"px":clearInterval(s)};if(a.addEventListener("mousedown",(()=>{m||!v||h||(i=setInterval((()=>x()),0))})),n.addEventListener("mousedown",(()=>{m||!v||h||(s=setInterval((()=>b()),0))})),a.addEventListener("mouseup",(()=>{clearInterval(i),clearInterval(s)})),n.addEventListener("mouseup",(()=>{clearInterval(i),clearInterval(s)})),0!==navigator.maxTouchPoints){let e,t,r=5;window.innerWidth<400&&(r=10),a.addEventListener("touchstart",(n=>{e=n.timeStamp,clearInterval(i),clearInterval(s),Math.abs(e-t)<300||m||!v||h||(i=setInterval((()=>x()),r))})),n.addEventListener("touchstart",(n=>{t=n.timeStamp,clearInterval(i),clearInterval(s),Math.abs(e-t)<300||m||!v||h||(s=setInterval((()=>b()),r))})),a.addEventListener("touchend",(()=>{clearInterval(i),clearInterval(s)})),n.addEventListener("touchend",(()=>{clearInterval(i),clearInterval(s)}))}r.addEventListener("click",(e=>{document.querySelector(".start-screen").style.display="none",E("block"),clearInterval(u),v?h||v&&!m?(()=>{if(v){v=!1;const e=document.querySelector(".alert");e.style.display="block",E("none"),document.querySelector("#yes").addEventListener("click",(()=>location.reload())),document.querySelector("#no").addEventListener("click",(()=>{E("block"),e.style.display="none",v=!0}))}})():m?m=!1:e.preventDefault():(()=>{let e=1600;window.innerWidth>900&&(e=2e3),window.innerWidth<400&&(e=1400);let t=Math.floor(21*Math.random()+50);v=!0,m=!1,c=setInterval((()=>{if(!(!m&&v&&g<=t))return!1;T(e),g++,g>t&&q(t)}),e)})()})),o.addEventListener("click",(e=>{v&&!h?S():e.preventDefault()})),window.addEventListener("orientationchange",(()=>{v&&!h?S():location.reload()})),window.addEventListener("blur",(()=>{v&&!h?S():location.reload()}))};onLoadGlobal();